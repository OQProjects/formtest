<!DOCTYPE html>
<html lang="sv" data-theme="auto">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Hallbergs Motor & Marinservice</title>
    <link rel="stylesheet" href="/styles.css" />
    <meta
      name="description"
      content="Fyll i dina kunduppgifter f√∂r att l√§gga en best√§llning."
    />
    <script>
      // --- Dark mode bootstrapping (avoids flash) ---
      (function () {
        const saved = localStorage.getItem("theme"); // "light" | "dark" | null
        const prefersDark = window.matchMedia(
          "(prefers-color-scheme: dark)"
        ).matches;
        const theme = saved ?? (prefersDark ? "dark" : "light");
        document.documentElement.setAttribute("data-theme", theme);
      })();
    </script>
  </head>
  <body>
    <!-- Site header -->
    <header class="site-header">
      <div class="site-header__inner">
        <a class="brand" href="/">
          <img src="/assets/logo.png" alt="Logo" class="brand__logo" />
        </a>
        <!-- <nav class="header-actions">
          <button
            id="themeToggle"
            class="icon-btn"
            aria-label="V√§xla tema"
            title="V√§xla tema"
          >
            üåì
          </button>
        </nav> -->
      </div>
    </header>

    <!-- Main content card -->
    <main class="container">
      <header class="header">
        <h1>Kundformul√§r</h1>
        <p class="lead">
          Fyll i dina uppgifter nedan. Vi √•terkommer via e-post.
        </p>
      </header>

      <!-- Tabs -->
      <div class="tabs" role="tablist">
        <button
          class="tab-btn active"
          role="tab"
          aria-selected="true"
          aria-controls="private-form"
          id="private-tab"
          data-tab="private"
        >
          Privatkund
        </button>
        <button
          class="tab-btn"
          role="tab"
          aria-selected="false"
          aria-controls="company-form"
          id="company-tab"
          data-tab="company"
        >
          F√∂retagskund
        </button>
      </div>

      <!-- Private Customer Form -->
      <form
        id="private-form"
        class="customer-form active"
        role="tabpanel"
        aria-labelledby="private-tab"
        action="https://formspree.io/f/xblzqjgr"
        method="POST"
        novalidate
      >
        <div class="stack">
          <div class="grid-2">
            <label>
              F√∂rnamn
              <input
                name="firstName"
                type="text"
                required
                autocomplete="given-name"
                placeholder="John"
              />
            </label>
            <label>
              Efternamn
              <input
                name="lastName"
                type="text"
                required
                autocomplete="family-name"
                placeholder="Andersson"
              />
            </label>
          </div>

          <div class="grid-2">
            <label>
              E-post
              <input
                name="email"
                type="email"
                required
                autocomplete="email"
                placeholder="john@example.com"
              />
            </label>
            <label>
              Telefonnummer
              <input
                name="phone"
                type="tel"
                required
                autocomplete="tel"
                placeholder="0701234567"
              />
            </label>
          </div>

          <label>
            Adress
            <input
              name="address"
              type="text"
              required
              autocomplete="street-address"
              placeholder="Storgatan 1"
            />
          </label>

          <div class="grid-2">
            <label>
              Postnummer
              <input
                name="zip"
                type="text"
                required
                inputmode="numeric"
                autocomplete="postal-code"
                placeholder="12345"
              />
            </label>
            <label>
              Stad
              <input
                name="city"
                type="text"
                required
                autocomplete="address-level2"
                placeholder="Stockholm"
              />
            </label>
          </div>

          <!-- Spam honeypot -->
          <input
            type="text"
            name="_gotcha"
            tabindex="-1"
            autocomplete="off"
            class="hp"
          />

          <!-- Hidden fields -->
          <input type="hidden" name="customerType" value="private" />
          <input
            type="hidden"
            name="_subject"
            value="Ny privatkund registrering"
          />
          <input
            type="hidden"
            name="_next"
            value="https://formspree.io/f/xblzqjgr-thank-you.html"
          />

          <button type="submit" class="btn">Registrera som ny kund</button>
          <p class="form-status muted" aria-live="polite"></p>
        </div>
      </form>

      <!-- Company Customer Form -->
      <form
        id="company-form"
        class="customer-form"
        role="tabpanel"
        aria-labelledby="company-tab"
        action="https://formspree.io/f/xblzqjgr"
        method="POST"
        novalidate
      >
        <div class="stack">
          <label>
            F√∂retagsnamn
            <input
              name="companyName"
              type="text"
              required
              autocomplete="organization"
              placeholder="F√∂retag AB"
            />
          </label>

          <label>
            Organisationsnummer
            <input
              name="orgNumber"
              type="text"
              required
              placeholder="556123-4567"
            />
          </label>

          <label>
            Kontaktperson
            <input
              name="contactPerson"
              type="text"
              required
              autocomplete="name"
              placeholder="Anna Svensson"
            />
          </label>

          <div class="grid-2">
            <label>
              E-post
              <input
                name="email"
                type="email"
                required
                autocomplete="email"
                placeholder="info@foretag.se"
              />
            </label>
            <label>
              Telefonnummer
              <input
                name="phone"
                type="tel"
                required
                autocomplete="tel"
                placeholder="0701234567"
              />
            </label>
          </div>

          <label>
            Adress
            <input
              name="address"
              type="text"
              required
              autocomplete="street-address"
              placeholder="F√∂retagsgatan 1"
            />
          </label>

          <div class="grid-2">
            <label>
              Postnummer
              <input
                name="zip"
                type="text"
                required
                inputmode="numeric"
                autocomplete="postal-code"
                placeholder="12345"
              />
            </label>
            <label>
              Stad
              <input
                name="city"
                type="text"
                required
                autocomplete="address-level2"
                placeholder="Stockholm"
              />
            </label>
          </div>

          <!-- Spam honeypot -->
          <input
            type="text"
            name="_gotcha"
            tabindex="-1"
            autocomplete="off"
            class="hp"
          />

          <!-- Hidden fields -->
          <input type="hidden" name="customerType" value="company" />
          <input
            type="hidden"
            name="_subject"
            value="Ny f√∂retagskund registrering"
          />
          <input
            type="hidden"
            name="_next"
            value="https://formspree.io/f/xblzqjgr-thank-you.html"
          />

          <button type="submit" class="btn">Registrera som ny kund</button>
          <p class="form-status muted" aria-live="polite"></p>
        </div>
      </form>
    </main>

    <!-- Site footer -->
    <footer class="site-footer" aria-label="Sidfot">
      <div class="site-footer__inner">
        <div class="site-footer__col">
          <h2 class="site-footer__title">Hallbergs Motor & Marinservice</h2>
          <p class="site-footer__tagline">
            Din p√•litliga partner f√∂r professionell service av bilar,
            motorcyklar och b√•tar.
          </p>
        </div>
        <div class="site-footer__col">
          <h3 class="site-footer__heading">Tj√§nster</h3>
          <ul class="site-footer__services">
            <li>Bilservice</li>
            <li>Motorcykelservice</li>
            <li>B√•tservice</li>
          </ul>
        </div>
        <div class="site-footer__col">
          <h3 class="site-footer__heading">Kontakta Oss</h3>
          <ul class="site-footer__contact">
            <li>
              <span class="site-footer__icon">üìû</span>
              <a href="tel:+46735951009">0735951009</a>
            </li>
            <li>
              <span class="site-footer__icon">‚úâÔ∏è</span>
              <a href="mailto:hallbergsmotormarin@gmail.com"
                >hallbergsmotormarin@gmail.com</a
              >
            </li>
            <li>
              <span class="site-footer__icon">üìç</span>
              <span>Torna-H√§llestad, 24745, Sverige</span>
            </li>
          </ul>
        </div>
      </div>
      <div class="site-footer__divider"></div>
      <div class="site-footer__copyright">
        <small
          >¬© 2025 Hallbergs Motor & Marinservice. Alla r√§ttigheter
          f√∂rbeh√•llna.</small
        >
      </div>
    </footer>

    <script>
      // Theme toggle + persistence
      const toggle = document.getElementById("themeToggle");
      toggle?.addEventListener("click", () => {
        const root = document.documentElement;
        const current = root.getAttribute("data-theme");
        const next = current === "dark" ? "light" : "dark";
        root.setAttribute("data-theme", next);
        localStorage.setItem("theme", next);
      });
    </script>
    <script>
      // Tab switching
      (function () {
        const tabs = document.querySelectorAll(".tab-btn");
        const forms = document.querySelectorAll(".customer-form");

        tabs.forEach((tab) => {
          tab.addEventListener("click", () => {
            const targetTab = tab.dataset.tab;

            // Update tab states
            tabs.forEach((t) => {
              t.classList.remove("active");
              t.setAttribute("aria-selected", "false");
            });
            tab.classList.add("active");
            tab.setAttribute("aria-selected", "true");

            // Update form visibility
            forms.forEach((form) => {
              form.classList.remove("active");
              if (form.id === `${targetTab}-form`) {
                form.classList.add("active");
              }
            });
          });
        });
      })();
    </script>
    <script>
      // Form submission handler (works for both forms)
      (function () {
        const forms = document.querySelectorAll(".customer-form");
        const endpoint = "https://formspree.io/f/xblzqjgr";

        forms.forEach((form) => {
          form.addEventListener("submit", async (e) => {
            e.preventDefault();
            const data = new FormData(form);
            const status = form.querySelector(".form-status");

            // Optional: basic spam honeypot check
            if (data.get("_gotcha")) return;

            // UX: disable button while sending
            const btn = form.querySelector("button[type='submit']");
            btn.disabled = true;
            btn.textContent = "Skickar‚Ä¶";

            try {
              const res = await fetch(endpoint, {
                method: "POST",
                body: data,
                headers: { Accept: "application/json" },
              });

              if (res.ok) {
                // success -> go to your page
                window.location.href = "/thank-you.html";
              } else {
                status.textContent =
                  "Kunde inte skicka formul√§ret. F√∂rs√∂k igen.";
                btn.disabled = false;
                btn.textContent = "Registrera som ny kund";
              }
            } catch (err) {
              status.textContent =
                "N√§tverksfel. Kontrollera uppkopplingen och f√∂rs√∂k igen.";
              btn.disabled = false;
              btn.textContent = "Registrera som ny kund";
            }
          });
        });
      })();
    </script>
  </body>
</html>
